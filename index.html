<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Градиенты мапы</title>
  <style>
    body {
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #8E8EA3;
      font-family: Arial, sans-serif;
    }
    #controls {
      margin-bottom: 20px;
    }
    #gradient-container {
      width: 80%;
      height: 50%;
      border: 2px solid #ccc;
      border-radius: 10px;
      background: linear-gradient(to right, #ffffff, #ffffff);
      position: relative;
      overflow: hidden;
    }
    .color-stop {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: black;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    }
    .color-label {
      position: absolute;
      top: 60%;
      text-align: center;
      font-size: 12px;
      color: #333;
      width: 50px;
      left: -25px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      background-color: #007bff;
      color: #fff;
      cursor: pointer;
      margin-right: 10px;
    }
    select, input {
      padding: 5px;
      font-size: 16px;
      margin-right: 10px;
    }

    #swatch-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
      width: 80%;
    }
    .color-swatch {
      width: 100px;
      height: 100px;
      padding: 10px;
      background: white;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .swatch-color {
      width: 50px;
      height: 50px;
      border-radius: 5px;
      margin-bottom: 5px;
    }
    .swatch-percentage {
      font-size: 12px;
      color: #666;
    }
  </style>
</head>
<body>
  <div id="controls">
    <label for="palette">Цвета:</label>
    <select id="palette">
      <option value="default">Рандом</option>
      <option value="pastel">Мягкие</option>
      <option value="neutral">Нейтральные</option>
      <option value="vivid">Яркие</option>
      <option value="dark">Темные</option>
    </select>
    <label for="scheme">Схема:</label>
    <select id="scheme">
      <option value="random">Рандом</option>
      <option value="complementary">Комплементарная</option>
      <option value="tetradic">Тетрада</option>
      <option value="analogous">Аналогова</option>
      <option value="triadic">Триада</option>
      <option value="square">Квадрат</option>
      <option value="split-complementary">Раздельно Комплементарная</option>
    </select>
    <label for="positions">Точки:</label>
    <input type="number" id="positions" min="3" max="10" value="5">
    <button id="generate-button">Сгенерировать</button>
  </div>
  <div id="gradient-container"></div>
  <div id="swatch-container"></div>
  <script>
    function hslToHex(h, s, l) {
      l /= 100;
      const a = s * Math.min(l, 1 - l) / 100;
      const f = n => {
        const k = (n + h / 30) % 12;
        const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
        return Math.round(255 * color).toString(16).padStart(2, '0');
      };
      return `#${f(0)}${f(8)}${f(4)}`;
    }
    function generateColorsForPalette(baseHue, scheme, palette) {
      const colors = [];
      let saturationRange, lightnessRange;
      switch (palette) {
        case 'pastel':
          saturationRange = [0, 70];
          lightnessRange = [70, 100];
          break;
        case 'dark':
          saturationRange = [0, 100];
          lightnessRange = [0, 30];
          break;
        case 'neutral':
          saturationRange = [0, 10];
          lightnessRange = [40, 60];
          break;
        case 'vivid':
          saturationRange = [100, 90];
          lightnessRange = [50, 60];
          break;
        default:
          saturationRange = [0, 100];
          lightnessRange = [0, 100];
      }
      const randomInRange = (min, max) => Math.random() * (max - min) + min;
      switch (scheme) {
        case 'complementary':
          colors.push(hslToHex(baseHue, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 180) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          break;
        case 'tetradic':
          colors.push(hslToHex(baseHue, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 90) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 180) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 270) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          break;
        case 'analogous':
          colors.push(hslToHex(baseHue, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 30) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue - 30 + 360) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          break;
        case 'triadic':
          colors.push(hslToHex(baseHue, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 120) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 240) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          break;
        case 'square':
          colors.push(hslToHex(baseHue, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 90) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 180) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 270) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          break;
        case 'split-complementary':
          colors.push(hslToHex(baseHue, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 150) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          colors.push(hslToHex((baseHue + 210) % 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          break;
        default:
          for (let i = 0; i < 5; i++) {
            colors.push(hslToHex(Math.random() * 360, randomInRange(...saturationRange), randomInRange(...lightnessRange)));
          }
      }
      return colors;
    }
    function makeColorsUnique(colors) {
      const uniqueColors = [...colors];
      for (let i = 0; i < uniqueColors.length; i++) {
        for (let j = i + 1; j < uniqueColors.length; j++) {
          if (uniqueColors[i] === uniqueColors[j]) {
            let [h, s, l] = hexToHsl(uniqueColors[i]);
            h = (h + Math.random() * 30 - 15 + 360) % 360;
            uniqueColors[j] = hslToHex(h, s, l);
          }
        }
      }
      return uniqueColors;
    }

    function hexToHsl(hex) {
      let r = parseInt(hex.slice(1, 3), 16) / 255;
      let g = parseInt(hex.slice(3, 5), 16) / 255;
      let b = parseInt(hex.slice(5, 7), 16) / 255;
      const max = Math.max(r, g, b);
      const min = Math.min(r, g, b);
      let h = 0, s = 0, l = (max + min) / 2;
      if (max !== min) {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h *= 60;
      }
      return [Math.round(h), Math.round(s * 100), Math.round(l * 100)];
    }

    function generateRandomGradient() {
      const container = document.getElementById('gradient-container');
      container.innerHTML = '';
      const palette = document.getElementById('palette').value;
      const scheme = document.getElementById('scheme').value;

      let numStops = parseInt(document.getElementById('positions').value);

      if (numStops === 0) {
        numStops = Math.floor(Math.random() * (10 - 3 + 1)) + 3;
      }

      numStops = Math.max(3, Math.min(10, numStops));

      const baseHue = Math.random() * 360;
      let colors = generateColorsForPalette(baseHue, scheme, palette);

      while (colors.length < numStops) {
        colors = colors.concat(colors);
      }
      colors = colors.slice(0, numStops);
      colors = makeColorsUnique(colors);

      const stops = [];
      for (let i = 0; i < numStops; i++) {
        const position = Math.random();
        stops.push({ position, color: colors[i] });

        const dot = document.createElement('div');
        dot.classList.add('color-stop');
        dot.style.left = `${position * 100}%`;
        dot.style.backgroundColor = colors[i];

        const label = document.createElement('div');
        label.classList.add('color-label');
        label.style.left = `${position * 100}%`;
        label.textContent = colors[i];

        container.appendChild(dot);
        container.appendChild(label);
      }

      stops.sort((a, b) => a.position - b.position);

      const swatchContainer = document.getElementById('swatch-container');
      swatchContainer.innerHTML = '';

      stops.forEach(stop => {
        const swatch = document.createElement('div');
        swatch.className = 'color-swatch';
        const colorBox = document.createElement('div');
        colorBox.className = 'swatch-color';
        colorBox.style.backgroundColor = stop.color;
        const hexLabel = document.createTextNode(stop.color);
        const percentageLabel = document.createElement('div');
        percentageLabel.className = 'swatch-percentage';
        percentageLabel.textContent = `${Math.round(stop.position * 100)}%`;

        swatch.appendChild(colorBox);
        swatch.appendChild(hexLabel);
        swatch.appendChild(percentageLabel);
        swatchContainer.appendChild(swatch);
      });

      const gradientStops = stops.map(stop => `${stop.color} ${stop.position * 100}%`).join(', ');
      container.style.background = `linear-gradient(to right, ${gradientStops})`;
    }


    document.getElementById('generate-button').onclick = generateRandomGradient;


    window.onload = generateRandomGradient;
  </script>
</body>
</html>
